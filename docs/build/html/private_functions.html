

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Private functions &mdash; find_delay 2.15 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
      <link rel="stylesheet" type="text/css" href="_static/dark_mode_css/general.css?v=c0a7eb24" />
      <link rel="stylesheet" type="text/css" href="_static/dark_mode_css/dark.css?v=70edf1c7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=d19175c4"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
      <script src="_static/dark_mode_js/default_light.js?v=c2e647ce"></script>
      <script src="_static/dark_mode_js/theme_switcher.js?v=358d3910"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples" href="examples.html" />
    <link rel="prev" title="find_delays" href="find_delays.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #99cc00" >

          
          
          <a href="index.html" class="icon icon-home">
            find_delay
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="find_delay.html">find_delay</a><ul>
<li class="toctree-l2"><a class="reference internal" href="find_delay.html#find_delay.find_delay"><code class="docutils literal notranslate"><span class="pre">find_delay()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="find_delays.html">find_delays</a><ul>
<li class="toctree-l2"><a class="reference internal" href="find_delays.html#find_delay.find_delays"><code class="docutils literal notranslate"><span class="pre">find_delays()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Private functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#find_delay.private_functions._filter_frequencies"><code class="docutils literal notranslate"><span class="pre">_filter_frequencies()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#find_delay.private_functions._get_number_of_windows"><code class="docutils literal notranslate"><span class="pre">_get_number_of_windows()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#find_delay.private_functions._get_envelope"><code class="docutils literal notranslate"><span class="pre">_get_envelope()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#find_delay.private_functions._resample_window"><code class="docutils literal notranslate"><span class="pre">_resample_window()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#find_delay.private_functions._resample"><code class="docutils literal notranslate"><span class="pre">_resample()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#find_delay.private_functions._cross_correlation"><code class="docutils literal notranslate"><span class="pre">_cross_correlation()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#find_delay.private_functions._convert_to_mono"><code class="docutils literal notranslate"><span class="pre">_convert_to_mono()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#find_delay.private_functions._create_figure"><code class="docutils literal notranslate"><span class="pre">_create_figure()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples/delay_audio_files.html">Find the delay between two audio files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples/delay_audio_files.html#mono-stereo-files">Mono/stereo files</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples/delay_audio_files.html#audio-files-with-different-frequencies">Audio files with different frequencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples/delay_audio_files.html#compute-the-envelope-for-audio-files">Compute the envelope for audio files</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples/delay_audio_files.html#return-the-delay-in-seconds">Return the delay in seconds</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples/delay_audio_files.html#plot-the-delay">Plot the delay</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples/delay_meg_misc.html">Find the delay of the audio on the MISC channel of an MEG recording</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples/delay_meg_misc.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples/delay_meg_misc.html#procedure">Procedure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="examples/delay_meg_misc.html#load-the-original-audio">Load the original audio</a></li>
<li class="toctree-l4"><a class="reference internal" href="examples/delay_meg_misc.html#isolate-the-audio-on-the-misc-channel">Isolate the audio on the MISC channel</a></li>
<li class="toctree-l4"><a class="reference internal" href="examples/delay_meg_misc.html#run-the-find-delay-function">Run the find_delay function</a></li>
<li class="toctree-l4"><a class="reference internal" href="examples/delay_meg_misc.html#correct-the-delay-and-save-the-events">Correct the delay and save the events</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="version_history.html">Version history</a><ul>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id1">2.15 (2025-01-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id2">2.14 (2024-12-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id3">2.13 (2024-12-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id4">2.12 (2024-11-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id5">2.11 (2024-09-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id6">2.10 (2024-09-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id7">2.9 (2024-09-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id8">2.8 (2024-06-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id9">2.7 (2024-05-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id10">2.6 (2024-05-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id11">2.5 (2024-05-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id12">2.4 (2024-05-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id13">2.3 (2024-05-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id14">2.2 (2024-05-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id15">2.1 (2024-04-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id16">2.0 (2024-04-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id17">1.3 (2024-04-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id18">1.2 (2024-04-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id19">1.1 (2024-04-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="version_history.html#id20">1.0 (2024-04-12)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#why-is-the-name-of-the-package-find-delay-when-installing-and-find-delay-when-importing">Why is the name of the package find-delay when installing, and find_delay when importing?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-want-to-use-find-delay-with-audio-files-but-my-audio-files-are-not-wav">I want to use find_delay with audio files, but my audio files are not WAV…</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-does-the-function-work-for-audio-files">How does the function work for audio files?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#the-delay-found-by-the-function-is-erroneous">The delay found by the function is erroneous…</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-found-an-issue-how-can-i-contact-the-developers">I found an issue! How can I contact the developers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-have-an-idea-for-improvement">I have an idea for improvement!</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #99cc00" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">find_delay</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Private functions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/private_functions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="private-functions">
<h1>Private functions<a class="headerlink" href="#private-functions" title="Link to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="find_delay.private_functions._filter_frequencies">
<span class="sig-prename descclassname"><span class="pre">find_delay.private_functions.</span></span><span class="sig-name descname"><span class="pre">_filter_frequencies</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_below</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_over</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_tabs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#find_delay.private_functions._filter_frequencies" title="Link to this definition"></a></dt>
<dd><p>Applies a low-pass, high-pass or band-pass filter to the data in the attribute <code class="xref py py-attr docutils literal notranslate"><span class="pre">samples</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.1: </span>Turned into a “private” function by adding a leading underscore.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (list|`np.ndarray &lt;<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html">https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html</a>&gt;`_) – An array of samples.</p></li>
<li><p><strong>frequency</strong> (<em>int</em><em>|</em><em>float</em>) – The sampling frequency of the array, in Hz.</p></li>
<li><p><strong>filter_below</strong> (<em>float</em><em>|</em><em>None</em><em>, </em><em>optional</em>) – The value below which you want to filter the data. If set on None or 0, this parameter will be ignored.
If this parameter is the only one provided, a high-pass filter will be applied to the samples; if
<code class="docutils literal notranslate"><span class="pre">filter_over</span></code> is also provided, a band-pass filter will be applied to the samples.</p></li>
<li><p><strong>filter_over</strong> (<em>float</em><em>|</em><em>None</em><em>, </em><em>optional</em>) – The value over which you want to filter the data. If set on None or 0, this parameter will be ignored.
If this parameter is the only one provided, a low-pass filter will be applied to the samples; if
<code class="docutils literal notranslate"><span class="pre">filter_below</span></code> is also provided, a band-pass filter will be applied to the samples.</p></li>
<li><p><strong>verbosity</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>Sets how much feedback the code will provide in the console output:</p>
<ul>
<li><p><em>0: Silent mode.</em> The code won’t provide any feedback, apart from error messages.</p></li>
<li><p><em>1: Normal mode</em> (default). The code will provide essential feedback such as progression markers and
current steps.</p></li>
<li><p><em>2: Chatty mode.</em> The code will provide all possible information on the events happening. Note that this
may clutter the output and slow down the execution.</p></li>
</ul>
</p></li>
<li><p><strong>add_tabs</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>Adds the specified amount of tabulations to the verbosity outputs (default: 0). This parameter may be used by
other functions to encapsulate the verbosity outputs by indenting them.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.12.</span></p>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The array with filtered values.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html">np.ndarray</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="find_delay.private_functions._get_number_of_windows">
<span class="sig-prename descclassname"><span class="pre">find_delay.private_functions.</span></span><span class="sig-name descname"><span class="pre">_get_number_of_windows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array_length_or_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_incomplete_window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#find_delay.private_functions._get_number_of_windows" title="Link to this definition"></a></dt>
<dd><p>Given an array, calculates how many windows from the defined <cite>window_size</cite> can be created, with or
without overlap.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.1: </span>Turned into a “private” function by adding a leading underscore.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.3: </span>Function temporarily removed as it was unused at the time.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.1: </span>Function reinstated.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array_length_or_array</strong> (<em>numpy.ndarray</em><em>|</em><em>list</em><em>|</em><em>int</em>) – An array of numerical values, or its length.</p></li>
<li><p><strong>window_size</strong> (<em>int</em>) – The number of array elements in each window.</p></li>
<li><p><strong>overlap_ratio</strong> (<em>float</em><em>, </em><em>optional</em>) – The ratio, between 0 (inclusive, default) and 1 (exclusive), of array elements overlapping between each window
and the next.</p></li>
<li><p><strong>add_incomplete_window</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set on <code class="docutils literal notranslate"><span class="pre">True</span></code> (default), the last window will be included even if its size is smaller than <code class="docutils literal notranslate"><span class="pre">window_size</span></code>.
Otherwise, it will be ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The number of windows than can be created from the array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="find_delay.private_functions._get_envelope">
<span class="sig-prename descclassname"><span class="pre">find_delay.private_functions.</span></span><span class="sig-name descname"><span class="pre">_get_envelope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_below</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_over</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_tabs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#find_delay.private_functions._get_envelope" title="Link to this definition"></a></dt>
<dd><p>Calculates the envelope of an array, and returns it. The function can also optionally perform a band-pass
filtering, if the corresponding parameters are provided. To calculate the envelope, the function calculates the
absolute values of the
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.hilbert.html">scipy.signal.hilbert</a> transform
of each window of the envelope.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.1: </span>Turned into a “private” function by adding a leading underscore.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span>Sets the number of windows to 1 if the parameter number_of_windows is lower than 1 (deprecated by version 2.1).</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.1: </span>The function now takes a <cite>window_size</cite> parameter instead of a <cite>number_of_windows</cite>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.4: </span>Corrected the progression percentage display.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.ndarray</em><em>|</em><em>list</em>) – An array of samples.</p></li>
<li><p><strong>frequency</strong> (<em>int</em><em>|</em><em>float</em>) – The sampling frequency of the array, in Hz.</p></li>
<li><p><strong>window_size</strong> (<em>int</em><em>|</em><em>None</em><em>, </em><em>optional</em>) – <p>The size of the windows (in samples) in which to cut the array to calculate the envelope. Cutting large arrays
into windows allows to speed up the computation. If this parameter is set on <cite>None</cite>, the window size will be set
on the number of samples. A good value for this parameter is generally 1 million (default). If this parameter is
set on 0, on <cite>None</cite> or on a number of samples bigger than the amount of elements in the array, the window size
is set on the length of the samples.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.1.</span></p>
</div>
</p></li>
<li><p><strong>overlap_ratio</strong> (<em>float</em><em>|</em><em>None</em><em>, </em><em>optional</em>) – The ratio of samples overlapping between each window. If this parameter is not <cite>None</cite>, each window will
overlap with the previous (and, logically, the next) for an amount of samples equal to the number of samples in
a window times the overlap ratio. Then, only the central values of each window will be preserved and
concatenated; this allows to discard any “edge” effect due to the windowing. If the parameter is set on <cite>None</cite>
or 0, the windows will not overlap. Default value: 0.5 (each window will overlap at 50% with the previous and
the next).</p></li>
<li><p><strong>filter_below</strong> (<em>int</em><em>|</em><em>float</em><em>|</em><em>None</em><em>, </em><em>optional</em>) – If not <cite>None</cite> (default) nor 0, this value will be provided as the lowest frequency of the band-pass filter.</p></li>
<li><p><strong>filter_over</strong> (<em>int</em><em>|</em><em>float</em><em>|</em><em>None</em><em>, </em><em>optional</em>) – If not <cite>None</cite> (default) nor 0, this value will be provided as the highest frequency of the band-pass filter.</p></li>
<li><p><strong>verbosity</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>Sets how much feedback the code will provide in the console output:</p>
<ul>
<li><p><em>0: Silent mode.</em> The code won’t provide any feedback, apart from error messages.</p></li>
<li><p><em>1: Normal mode</em> (default). The code will provide essential feedback such as progression markers and
current steps.</p></li>
<li><p><em>2: Chatty mode.</em> The code will provide all possible information on the events happening. Note that this
may clutter the output and slow down the execution.</p></li>
</ul>
</p></li>
<li><p><strong>add_tabs</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>Adds the specified amount of tabulations to the verbosity outputs (default: 0). This parameter may be used by
other functions to encapsulate the verbosity outputs by indenting them.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.12.</span></p>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The envelope of the original array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html">np.ndarray</a></p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="find_delay.private_functions._resample_window">
<span class="sig-prename descclassname"><span class="pre">find_delay.private_functions.</span></span><span class="sig-name descname"><span class="pre">_resample_window</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resampled_timestamps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_start_original</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_end_original</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_start_resampled</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_end_resampled</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cubic'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_tabs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#find_delay.private_functions._resample_window" title="Link to this definition"></a></dt>
<dd><p>Performs and returns the resampling on a subarray of samples.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.1: </span>Turned into a “private” function by adding a leading underscore.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.ndarray</em><em>|</em><em>list</em>) – An array of samples.</p></li>
<li><p><strong>original_timestamps</strong> (<em>numpy.ndarray</em><em>|</em><em>list</em>) – An array containing the timestamps for each sample of the original array.</p></li>
<li><p><strong>resampled_timestamps</strong> (<em>numpy.ndarray</em><em>|</em><em>list</em>) – An array containing the timestamps for each desired sample in the resampled array.</p></li>
<li><p><strong>index_start_original</strong> (<em>int</em>) – The index in the array where the window starts.</p></li>
<li><p><strong>index_end_original</strong> (<em>int</em>) – The index in the array where the window ends.</p></li>
<li><p><strong>index_start_resampled</strong> (<em>int</em>) – The index in the resampled array where the window starts.</p></li>
<li><p><strong>index_end_resampled</strong> (<em>int</em>) – The index in the resampled array where the window ends.</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>This parameter allows for various values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;linear&quot;</span></code> performs a linear
<a class="reference external" href="https://numpy.org/devdocs/reference/generated/numpy.interp.html">numpy.interp</a> interpolation. This method,
though simple, may not be very precise for upsampling naturalistic stimuli.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;cubic&quot;</span></code> (default) performs a cubic interpolation via <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.CubicSpline.html">scipy.interpolate.CubicSpline</a>. This method,
while smoother than the linear interpolation, may lead to unwanted oscillations nearby strong variations in
the data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;pchip&quot;</span></code> performs a monotonic cubic spline interpolation (Piecewise Cubic Hermite Interpolating
Polynomial) via <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.PchipInterpolator.html">scipy.interpolate.PchipInterpolator</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;akima&quot;</span></code> performs another type of monotonic cubic spline interpolation, using
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.Akima1DInterpolator.html">scipy.interpolate.Akima1DInterpolator</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;take&quot;</span></code> keeps one out of n samples from the original array. While being the fastest computation, it will
be prone to imprecision if the downsampling factor is not an integer divider of the original frequency.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;interp1d_XXX&quot;</span></code> uses the function <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html">scipy.interpolate.interp1d</a>. The XXX part of the
parameter can be replaced by <code class="docutils literal notranslate"><span class="pre">&quot;linear&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;nearest&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;nearest-up&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;zero&quot;</span></code>, “slinear”<code class="docutils literal notranslate"><span class="pre">,</span>
<span class="pre">``&quot;quadratic&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;cubic&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;previous&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;next&quot;</span></code> (see the documentation of this function for
specifics).</p></li>
</ul>
</p></li>
<li><p><strong>verbosity</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>Sets how much feedback the code will provide in the console output:</p>
<ul>
<li><p><em>0: Silent mode.</em> The code won’t provide any feedback, apart from error messages.</p></li>
<li><p><em>1: Normal mode</em> (default). The code will provide essential feedback such as progression markers and
current steps.</p></li>
<li><p><em>2: Chatty mode.</em> The code will provide all possible information on the events happening. Note that this
may clutter the output and slow down the execution.</p></li>
</ul>
</p></li>
<li><p><strong>add_tabs</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>Adds the specified amount of tabulations to the verbosity outputs (default: 0). This parameter may be used by
other functions to encapsulate the verbosity outputs by indenting them.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.12.</span></p>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The envelope of the original array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html">np.ndarray</a></p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="find_delay.private_functions._resample">
<span class="sig-prename descclassname"><span class="pre">find_delay.private_functions.</span></span><span class="sig-name descname"><span class="pre">_resample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original_frequency</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resampling_frequency</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10000000.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'cubic'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_tabs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#find_delay.private_functions._resample" title="Link to this definition"></a></dt>
<dd><p>Resamples an array to the <cite>resampling_frequency</cite> parameter. It first creates a new set of timestamps at the
desired frequency, and then interpolates the original data to the new timestamps.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.1: </span>Turned into a “private” function by adding a leading underscore.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span>Sets the number of windows to 1 if the parameter number_of_windows is lower than 1 (deprecated).</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.1: </span>The function now takes a <cite>window_size</cite> parameter instead of a <cite>number_of_windows</cite>.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.4: </span>Corrected the progression percentage display.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> (<em>numpy.ndarray</em><em>|</em><em>list</em>) – An array of samples.</p></li>
<li><p><strong>original_frequency</strong> (<em>int</em><em>|</em><em>float</em>) – The sampling frequency of the array, in Hz.</p></li>
<li><p><strong>resampling_frequency</strong> (<em>int</em><em>|</em><em>float</em>) – The frequency at which you want to resample the array, in Hz. A frequency of 4 will return samples
at 0.25 s intervals.</p></li>
<li><p><strong>window_size</strong> (<em>int</em><em>|</em><em>None</em><em>, </em><em>optional</em>) – <p>The size of the windows (in samples) in which to cut the array before resampling. Cutting large arrays
into windows allows to speed up the computation. If this parameter is set on <cite>None</cite>, the window size will be set
on the number of samples. A good value for this parameter is generally 10 million (default). If this parameter
is set on 0, on None or on a number of samples bigger than the amount of elements in the array, the window size
is set on the length of the samples.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.1.</span></p>
</div>
</p></li>
<li><p><strong>overlap_ratio</strong> (<em>float</em><em>|</em><em>None</em><em>, </em><em>optional</em>) – The ratio of samples overlapping between each window. If this parameter is not <cite>None</cite>, each window will
overlap with the previous (and, logically, the next) for an amount of samples equal to the number of samples in
a window times the overlap ratio. Then, only the central values of each window will be preserved and
concatenated; this allows to discard any “edge” effect due to the windowing. If the parameter is set on <cite>None</cite>
or 0, the windows will not overlap. Default value: 0.5 (each window will overlap at 50% with the previous and
the next).</p></li>
<li><p><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>This parameter allows for various values:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;linear&quot;</span></code> performs a linear
<a class="reference external" href="https://numpy.org/devdocs/reference/generated/numpy.interp.html">numpy.interp</a> interpolation. This method,
though simple, may not be very precise for upsampling naturalistic stimuli.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;cubic&quot;</span></code> (default) performs a cubic interpolation via <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.CubicSpline.html">scipy.interpolate.CubicSpline</a>. This method,
while smoother than the linear interpolation, may lead to unwanted oscillations nearby strong variations in
the data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;pchip&quot;</span></code> performs a monotonic cubic spline interpolation (Piecewise Cubic Hermite Interpolating
Polynomial) via <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.PchipInterpolator.html">scipy.interpolate.PchipInterpolator</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;akima&quot;</span></code> performs another type of monotonic cubic spline interpolation, using
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.Akima1DInterpolator.html">scipy.interpolate.Akima1DInterpolator</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;take&quot;</span></code> keeps one out of n samples from the original array. While being the fastest computation, it will
be prone to imprecision if the downsampling factor is not an integer divider of the original frequency.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;interp1d_XXX&quot;</span></code> uses the function <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html">scipy.interpolate.interp1d</a>. The XXX part of the
parameter can be replaced by <code class="docutils literal notranslate"><span class="pre">&quot;linear&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;nearest&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;nearest-up&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;zero&quot;</span></code>, “slinear”<code class="docutils literal notranslate"><span class="pre">,</span>
<span class="pre">``&quot;quadratic&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;cubic&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;previous&quot;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&quot;next&quot;</span></code> (see the documentation of this function for
specifics).</p></li>
</ul>
</p></li>
<li><p><strong>verbosity</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>Sets how much feedback the code will provide in the console output:</p>
<ul>
<li><p><em>0: Silent mode.</em> The code won’t provide any feedback, apart from error messages.</p></li>
<li><p><em>1: Normal mode</em> (default). The code will provide essential feedback such as progression markers and
current steps.</p></li>
<li><p><em>2: Chatty mode.</em> The code will provide all possible information on the events happening. Note that this
may clutter the output and slow down the execution.</p></li>
</ul>
</p></li>
<li><p><strong>add_tabs</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>Adds the specified amount of tabulations to the verbosity outputs (default: 0). This parameter may be used by
other functions to encapsulate the verbosity outputs by indenting them.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.12.</span></p>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The resampled array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html">np.ndarray</a></p>
</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function allows both the <strong>upsampling</strong> and the <strong>downsampling</strong> of arrays. However, during any of
these operations, the algorithm only <strong>estimates</strong> the real values of the samples. You should then consider
the upsampling (and the downsampling, to a lesser extent) with care.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="find_delay.private_functions._cross_correlation">
<span class="sig-prename descclassname"><span class="pre">find_delay.private_functions.</span></span><span class="sig-name descname"><span class="pre">_cross_correlation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_y1_original</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_delay_format</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_tabs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#find_delay.private_functions._cross_correlation" title="Link to this definition"></a></dt>
<dd><p>Performs a normalized cross-correlation between two arrays.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.12.</span></p>
</div>
<dl>
<dt>y1: <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html">np.ndarray</a></dt><dd><p>The first array to cross-correlate.</p>
</dd>
<dt>y2: <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html">np.ndarray</a></dt><dd><p>The second array to cross-correlate.</p>
</dd>
<dt>rate: int|float</dt><dd><p>The frequency rate of the two arrays.</p>
</dd>
<dt>freq_y1_original: int|float</dt><dd><p>The original frequency rate of y1, before resampling.</p>
</dd>
<dt>threshold: float</dt><dd><p>The threshold of the minimum correlation value between the two arrays to accept a delay as a solution. If
multiple delays are over threshold, the delay with the maximum correlation value will be returned. This value
should be between 0 and 1; if the maximum found value is below the threshold, the function will return <cite>None</cite>
instead of a timestamp.</p>
</dd>
<dt>return_delay_format: str, optional</dt><dd><p>This parameter can be either <code class="docutils literal notranslate"><span class="pre">&quot;index&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;ms&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;s&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;timedelta&quot;</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">&quot;index&quot;</span></code> (default), the function will return the index in array_1 at which array_2 has the highest
cross-correlation value.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">&quot;ms&quot;</span></code>, the function will return the timestamp in array_1, in milliseconds, at which array_2 has the
highest cross-correlation value.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">&quot;s&quot;</span></code>, the function will return the timestamp in array_1, in seconds, at which array_2 has the
highest cross-correlation value.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">&quot;timedelta&quot;</span></code>, the function will return the timestamp in array_1 at which array_2 has the
highest cross-correlation value as a
<a class="reference external" href="https://docs.python.org/3/library/datetime.html#timedelta-objects">datetime.timedelta</a> object.
Note that, in the case where the result is negative, the timedelta format may give unexpected display
results (-1 second returns -1 days, 86399 seconds).</p></li>
</ul>
</div></blockquote>
</dd>
<dt>verbosity: int, optional</dt><dd><p>Sets how much feedback the code will provide in the console output:</p>
<ul class="simple">
<li><p><em>0: Silent mode.</em> The code won’t provide any feedback, apart from error messages.</p></li>
<li><p><em>1: Normal mode</em> (default). The code will provide essential feedback such as progression markers and
current steps.</p></li>
<li><p><em>2: Chatty mode.</em> The code will provide all possible information on the events happening. Note that this
may clutter the output and slow down the execution.</p></li>
</ul>
</dd>
<dt>add_tabs: int, optional</dt><dd><p>Adds the specified amount of tabulations to the verbosity outputs (default: 0). This parameter may be used by
other functions to encapsulate the verbosity outputs by indenting them.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.12.</span></p>
</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html">np.ndarray</a> – The normalized cross-correlation array.</p></li>
<li><p><em>int|float|timedelta|None</em> – The sample index, timestamp or timedelta of y1 at which y2 can be found (defined by the parameter
return_delay_format), or <cite>None</cite> if y1 is not contained in y2.</p></li>
<li><p><em>float</em> – The max correlation value from the normalized cross-correlation array.</p></li>
<li><p><em>int</em> – The index of this max correlation value in the normalized cross-correlation array.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="find_delay.private_functions._convert_to_mono">
<span class="sig-prename descclassname"><span class="pre">find_delay.private_functions.</span></span><span class="sig-name descname"><span class="pre">_convert_to_mono</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">audio_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mono_channel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_tabs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#find_delay.private_functions._convert_to_mono" title="Link to this definition"></a></dt>
<dd><p>Converts an audio array to mono.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.9.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>audio_data</strong> – The parameter data resulting from reading a WAV file with
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.io.wavfile.read.html">scipy.io.wavfile.read</a>.</p></li>
<li><p><strong>mono_channel</strong> (<em>int</em><em>|</em><em>str</em><em>, </em><em>optional</em>) – Defines the method to use to convert multiple-channel WAV files to mono, if one of the parameters <cite>array1</cite> or
<cite>array2</cite> is a path pointing to a WAV file. By default, this parameter value is <code class="docutils literal notranslate"><span class="pre">0</span></code>: the channel with index 0
in the WAV file is used as the array, while all the other channels are discarded. This value can be any
of the channels indices (using <code class="docutils literal notranslate"><span class="pre">1</span></code> will preserve the channel with index 1, etc.). This parameter can also
take the value <code class="docutils literal notranslate"><span class="pre">&quot;average&quot;</span></code>: in that case, a new channel is created by averaging the values of all the
channels of the WAV file. Note that this parameter applies to both arrays: in the case where you need to select
different channels for each WAV file, open the files before calling the function and pass the samples and
frequencies as parameters.</p></li>
<li><p><strong>verbosity</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>Sets how much feedback the code will provide in the console output:</p>
<ul>
<li><p><em>0: Silent mode.</em> The code won’t provide any feedback, apart from error messages.</p></li>
<li><p><em>1: Normal mode</em> (default). The code will provide essential feedback such as progression markers and
current steps.</p></li>
<li><p><em>2: Chatty mode.</em> The code will provide all possible information on the events happening. Note that this
may clutter the output and slow down the execution.</p></li>
</ul>
</p></li>
<li><p><strong>add_tabs</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>Adds the specified amount of tabulations to the verbosity outputs (default: 0). This parameter may be used by
other functions to encapsulate the verbosity outputs by indenting them.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.12.</span></p>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A 1D numpy array containing the audio converted to mono.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="find_delay.private_functions._create_figure">
<span class="sig-prename descclassname"><span class="pre">find_delay.private_functions.</span></span><span class="sig-name descname"><span class="pre">_create_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">array_2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_array_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_array_2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_array_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_array_2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">envelope_1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">envelope_2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compute_envelope</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size_env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap_ratio_env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_below</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_over</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resampling_rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size_res</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlap_ratio_res</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cross_correlation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_of_plots</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_delay_format</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_correlation_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_max_correlation_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_figure</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_figure</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_figure</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_intermediate_steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_format_figure</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dark_mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbosity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_tabs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#find_delay.private_functions._create_figure" title="Link to this definition"></a></dt>
<dd><p>Creates and/or saves a figure given the parameters of the find_delay function.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.1.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.2: </span>Added transparency in the graph overlay.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span>Modified subplot titles to reflect changes of separated number of windows between both arrays.
Corrected the figure saving to a file and prevented overwriting the same figure using find_delays.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.2: </span>Arrays with different amplitudes now appear scaled on the aligned arrays graph.
Added a second y-axis to the aligned arrays graph.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.3: </span>Corrected the figure saving to a file.
If <cite>plot_intermediate_steps</cite> is <cite>False</cite>, the two graphs “cross-correlation” and “aligned arrays” are now on top
of each other instead of side-by-side.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.4: </span>Added the new parameter <cite>x_format_figure</cite>, allowing to have HH:MM:SS times on the x-axis.
Modified the scaling of the aligned arrays figure to be more accurate.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array_1</strong> – The first array involved in the cross-correlation.</p></li>
<li><p><strong>array_2</strong> – The second array involved in the cross-correlation, being allegedly an excerpt from the first.</p></li>
<li><p><strong>freq_array_1</strong> (<em>int</em><em>|</em><em>float</em>) – The sampling rate of <cite>array_1</cite>.</p></li>
<li><p><strong>freq_array_2</strong> (<em>in</em><em>|</em><em>float</em>) – The sampling rate of <cite>array_2</cite>.</p></li>
<li><p><strong>name_array_1</strong> (<em>str</em>) – The name of the first array; will be “Array 1” for <cite>find_delay</cite> and “Array” for <cite>find_delays</cite>.</p></li>
<li><p><strong>name_array_2</strong> (<em>str</em>) – The name of the second array; will be “Array 2” for <cite>find_delay</cite> and “Excerpt n” for <cite>find_delays</cite>, with n
being the index of the excerpt in the folder.</p></li>
<li><p><strong>envelope_1</strong> – The envelope of <cite>array_1</cite> (if calculated).</p></li>
<li><p><strong>envelope_2</strong> – The envelope of <cite>array_2</cite> (if calculated).</p></li>
<li><p><strong>y1</strong> – The resampled <cite>array_1</cite> or <cite>envelope_1</cite> (if calculated).</p></li>
<li><p><strong>y2</strong> – The resampled <cite>array_2</cite> or <cite>envelope_2</cite> (if calculated).</p></li>
<li><p><strong>compute_envelope</strong> (<em>bool</em>) – A boolean describing if the envelope has been computed or not.</p></li>
<li><p><strong>window_size_env</strong> (<em>int</em>) – The size of the windows in which the arrays were cut for the envelope calculation.</p></li>
<li><p><strong>overlap_ratio_env</strong> (<em>float</em>) – The ratio of overlapping between each envelope window with the previous and the next windows.</p></li>
<li><p><strong>filter_below</strong> (<em>int</em><em>|</em><em>float</em><em>|</em><em>None</em>) – The lower limit of the bandpass filter applied to the envelopes.</p></li>
<li><p><strong>filter_over</strong> (<em>int</em><em>|</em><em>float</em><em>|</em><em>None</em>) – The upper limit of the bandpass filter applied to the envelopes.</p></li>
<li><p><strong>resampling_rate</strong> (<em>int</em><em>|</em><em>float</em><em>|</em><em>None</em>) – The rate at which the arrays or the envelopes have been resampled.</p></li>
<li><p><strong>window_size_res</strong> (<em>int</em>) – The size of the windows in which the arrays or envelopes were cut for the resampling.</p></li>
<li><p><strong>overlap_ratio_res</strong> (<em>float</em>) – The ratio of overlapping between each resampling window with the previous and the next windows.</p></li>
<li><p><strong>cross-correlation</strong> – The array containing the correlation values for each lag between the two arrays.</p></li>
<li><p><strong>threshold</strong> (<em>float</em>) – The threshold of the maximum correlation value between the two arrays, relative to the maximum
correlation value between the excerpt and itself.</p></li>
<li><p><strong>return_delay_format</strong> (<em>str</em>) – Indicates the format of the displayed delay, either <code class="docutils literal notranslate"><span class="pre">&quot;index&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;ms&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;s&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;timedelta&quot;</span></code>.</p></li>
<li><p><strong>return_value</strong> (<em>int</em><em>|</em><em>float</em><em>|</em><em>timedelta</em>) – The value of the delay in the format specified by the previous parameter.</p></li>
<li><p><strong>max_correlation_value</strong> (<em>float</em>) – The maximum correlation value from the cross-correlation.</p></li>
<li><p><strong>index_max_correlation_value</strong> (<em>int</em>) – The index at which the maximum correlation value can be found in the cross-correlation array.</p></li>
<li><p><strong>plot_figure</strong> (<em>bool</em>) – If set on <cite>True</cite>, plots the figure in a Matplotlib window.</p></li>
<li><p><strong>path_figure</strong> (<em>str</em><em>|</em><em>None</em>) – If set, saves the figure at the given path.</p></li>
<li><p><strong>name_figure</strong> (<em>str</em><em>|</em><em>None</em>) – If set, considers that <cite>path_figure</cite> is the directory where to save the figure, and <cite>name_figure</cite> is the name
of the file.</p></li>
<li><p><strong>plot_intermediate_steps</strong> (<em>bool</em>) – If set on <cite>True</cite>, plots the original audio clips, the envelopes and the resampled arrays (if calculated) besides
the cross-correlation.</p></li>
<li><p><strong>x_format_figure</strong> (<em>str</em>) – If set on <cite>“time”</cite>, the values on the x axes of the output will take the HH:MM:SS format (or MM:SS if the time
series are less than one hour long). If set on <cite>“float”</cite>, the values on the x axes will be displayed as float
(unit: second). If set on <cite>“auto”</cite> (default), the format of the values on the x axes will be defined depending
on the value of <cite>return_delay_format</cite>.</p></li>
<li><p><strong>dark_mode</strong> (<em>bool</em><em>, </em><em>optional</em>) – If set on <cite>True</cite>, uses the <a class="reference external" href="https://matplotlib.org/stable/gallery/style_sheets/dark_background.html">dark_background theme from matplotlib</a>
(default: <cite>False</cite>).</p></li>
<li><p><strong>verbosity</strong> (<em>int</em>) – <p>Sets how much feedback the code will provide in the console output:</p>
<ul>
<li><p><em>0: Silent mode.</em> The code won’t provide any feedback, apart from error messages.</p></li>
<li><p><em>1: Normal mode</em> (default). The code will provide essential feedback such as progression markers and
current steps.</p></li>
<li><p><em>2: Chatty mode.</em> The code will provide all possible information on the events happening. Note that this
may clutter the output and slow down the execution.</p></li>
</ul>
</p></li>
<li><p><strong>add_tabs</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>Adds the specified amount of tabulations to the verbosity outputs (default: 0). This parameter may be used by
other functions to encapsulate the verbosity outputs by indenting them.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.12.</span></p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="find_delays.html" class="btn btn-neutral float-left" title="find_delays" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Romain Pastureau.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>