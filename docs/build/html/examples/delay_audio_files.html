

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Find the delay between two audio files &mdash; find_delay 2.18 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
      <link rel="stylesheet" type="text/css" href="../_static/dark_mode_css/general.css?v=c0a7eb24" />
      <link rel="stylesheet" type="text/css" href="../_static/dark_mode_css/dark.css?v=70edf1c7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=aa0bd875"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/dark_mode_js/default_light.js?v=c2e647ce"></script>
      <script src="../_static/dark_mode_js/theme_switcher.js?v=358d3910"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Find the delay of the audio on the MISC channel of an MEG recording" href="delay_meg_misc.html" />
    <link rel="prev" title="Examples" href="../examples.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #99cc00" >

          
          
          <a href="../index.html" class="icon icon-home">
            find_delay
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../find_delay.html">find_delay</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../find_delay.html#find_delay.find_delay"><code class="docutils literal notranslate"><span class="pre">find_delay()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../find_delays.html">find_delays</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../find_delays.html#find_delay.find_delays"><code class="docutils literal notranslate"><span class="pre">find_delays()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../private_functions.html">Private functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../private_functions.html#find_delay.private_functions._filter_frequencies"><code class="docutils literal notranslate"><span class="pre">_filter_frequencies()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../private_functions.html#find_delay.private_functions._get_number_of_windows"><code class="docutils literal notranslate"><span class="pre">_get_number_of_windows()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../private_functions.html#find_delay.private_functions._get_envelope"><code class="docutils literal notranslate"><span class="pre">_get_envelope()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../private_functions.html#find_delay.private_functions._resample_window"><code class="docutils literal notranslate"><span class="pre">_resample_window()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../private_functions.html#find_delay.private_functions._resample"><code class="docutils literal notranslate"><span class="pre">_resample()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../private_functions.html#find_delay.private_functions._cross_correlation"><code class="docutils literal notranslate"><span class="pre">_cross_correlation()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../private_functions.html#find_delay.private_functions._convert_to_mono"><code class="docutils literal notranslate"><span class="pre">_convert_to_mono()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../private_functions.html#find_delay.private_functions._create_figure"><code class="docutils literal notranslate"><span class="pre">_create_figure()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../examples.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Find the delay between two audio files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mono-stereo-files">Mono/stereo files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#audio-files-with-different-frequencies">Audio files with different frequencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compute-the-envelope-for-audio-files">Compute the envelope for audio files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#return-the-delay-in-seconds">Return the delay in seconds</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plot-the-delay">Plot the delay</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="delay_meg_misc.html">Find the delay of the audio on the MISC channel of an MEG recording</a><ul>
<li class="toctree-l3"><a class="reference internal" href="delay_meg_misc.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="delay_meg_misc.html#procedure">Procedure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="delay_meg_misc.html#load-the-original-audio">Load the original audio</a></li>
<li class="toctree-l4"><a class="reference internal" href="delay_meg_misc.html#isolate-the-audio-on-the-misc-channel">Isolate the audio on the MISC channel</a></li>
<li class="toctree-l4"><a class="reference internal" href="delay_meg_misc.html#run-the-find-delay-function">Run the find_delay function</a></li>
<li class="toctree-l4"><a class="reference internal" href="delay_meg_misc.html#correct-the-delay-and-save-the-events">Correct the delay and save the events</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../version_history.html">Version history</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id1">2.18 (2025-06-29)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id2">2.17 (2025-04-10)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id3">2.16 (2025-03-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id4">2.15 (2025-01-23)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id5">2.14 (2024-12-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id6">2.13 (2024-12-15)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id7">2.12 (2024-11-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id8">2.11 (2024-09-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id9">2.10 (2024-09-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id10">2.9 (2024-09-05)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id11">2.8 (2024-06-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id12">2.7 (2024-05-09)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id13">2.6 (2024-05-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id14">2.5 (2024-05-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id15">2.4 (2024-05-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id16">2.3 (2024-05-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id17">2.2 (2024-05-02)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id18">2.1 (2024-04-25)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id19">2.0 (2024-04-24)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id20">1.3 (2024-04-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id21">1.2 (2024-04-17)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id22">1.1 (2024-04-16)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../version_history.html#id23">1.0 (2024-04-12)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#why-is-the-name-of-the-package-find-delay-when-installing-and-find-delay-when-importing">Why is the name of the package find-delay when installing, and find_delay when importing?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#i-want-to-use-find-delay-with-audio-files-but-my-audio-files-are-not-wav">I want to use find_delay with audio files, but my audio files are not WAV…</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#how-does-the-function-work-for-audio-files">How does the function work for audio files?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#the-delay-found-by-the-function-is-erroneous">The delay found by the function is erroneous…</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#i-found-an-issue-how-can-i-contact-the-developers">I found an issue! How can I contact the developers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faq.html#i-have-an-idea-for-improvement">I have an idea for improvement!</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #99cc00" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">find_delay</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../examples.html">Examples</a></li>
      <li class="breadcrumb-item active">Find the delay between two audio files</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/delay_audio_files.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="find-the-delay-between-two-audio-files">
<h1>Find the delay between two audio files<a class="headerlink" href="#find-the-delay-between-two-audio-files" title="Link to this heading"></a></h1>
<p>Since version 2.11, it is possible to directly find the delay between audio files by just setting the path
to the audio files as parameters to the find_delay function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;excerpt.wav&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, only putting these two parameters will work and return a delay in samples of <code class="docutils literal notranslate"><span class="pre">&quot;audio_file.wav&quot;</span></code>.</p>
<section id="mono-stereo-files">
<h2>Mono/stereo files<a class="headerlink" href="#mono-stereo-files" title="Link to this heading"></a></h2>
<p>If the audio files are in <strong>stereo</strong> (or more channels), the function will automatically run the cross-correlation on
the first channel for both files. This can be manually set via the parameter <code class="docutils literal notranslate"><span class="pre">mono_channel</span></code>, where it can be set
on an integer (default 0), or on <code class="docutils literal notranslate"><span class="pre">&quot;average&quot;</span></code> to average the samples across all channels.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;excerpt.wav&quot;</span><span class="p">,</span> <span class="n">mono_channel</span><span class="o">=</span><span class="s2">&quot;average&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This parameter applies to all the audio files - in the case where you want to select different channels between the
audio file and the excerpt, select the channel you need beforehand.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">wavfile</span>

<span class="n">wav_full</span> <span class="o">=</span> <span class="n">wavfile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">)</span>
<span class="n">wav_full_freq</span> <span class="o">=</span> <span class="n">wav_full</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">wav_full_array</span> <span class="o">=</span> <span class="n">wav_full</span><span class="p">[</span><span class="mi">1</span><span class="p">][:,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># Get the first channel</span>

<span class="n">wav_excerpt</span> <span class="o">=</span> <span class="n">wavfile</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">)</span>
<span class="n">wav_excerpt_freq</span> <span class="o">=</span> <span class="n">wav_excerpt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">wav_excerpt_array</span> <span class="o">=</span> <span class="n">wav_excerpt</span><span class="p">[</span><span class="mi">1</span><span class="p">][:,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># Get the second channel</span>

<span class="c1"># As we pass the arrays only, we now need to specify the frequency</span>
<span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="n">wav_full_array</span><span class="p">,</span> <span class="n">wav_excerpt_array</span><span class="p">,</span> <span class="n">wav_full_freq</span><span class="p">,</span> <span class="n">wav_excerpt_freq</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="audio-files-with-different-frequencies">
<h2>Audio files with different frequencies<a class="headerlink" href="#audio-files-with-different-frequencies" title="Link to this heading"></a></h2>
<p>Audio files with different frequencies need to undergo resampling. The parameters controlling the resampling are
<code class="docutils literal notranslate"><span class="pre">resampling_rate</span></code>, <code class="docutils literal notranslate"><span class="pre">window_size_res</span></code>, <code class="docutils literal notranslate"><span class="pre">overlap_ratio_res</span></code>, and <code class="docutils literal notranslate"><span class="pre">resampling_mode</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">resampling_rate</span></code> is set on <code class="docutils literal notranslate"><span class="pre">&quot;auto&quot;</span></code> (default), the function will automatically try to perform the resampling at
the lowest frequency of the two arrays. For example, with an original file sampled at 48000 Hz and an excerpt sampled
at 44100 Hz, the function will resample the original file at 44100 Hz before calculating the delay. Then, the returned
delay will be converted to return the appropriate sample value at the original sampling of 48000 Hz.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;excerpt.wav&quot;</span><span class="p">,</span> <span class="n">resampling_rate</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>It is also possible to manually set the resampling rate to a lower value, such as 10000 Hz. Note that the lower the
resampling rate, the lesser accurate the result will be. As the cross-correlation relies on the envelopes of the audio
files, setting a resampling rate to a value lower than 1000 Hz may not allow to detect any correlation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;excerpt.wav&quot;</span><span class="p">,</span> <span class="n">resampling_rate</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to reduce the memory load and to accelerate the calculations, the function also offers to cut the large
arrays into windows with overlaps, perform the resampling on these windows, then glue these windows together. The
parameter <code class="docutils literal notranslate"><span class="pre">window_size_res</span></code> allows to set the size of the windows, while <code class="docutils literal notranslate"><span class="pre">overlap_ratio_res</span></code> sets the overlap.
The default values for these parameters (window size of 1 million samples and overlap of 50 ̀%) allow to significantly
speed up the computation, with a negligible trade-off in accuracy. These parameters should be tweaked cautiously,
and only for very large files.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;excerpt.wav&quot;</span><span class="p">,</span>
                   <span class="n">resampling_rate</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">window_size_res</span><span class="o">=</span><span class="mf">1e6</span><span class="p">,</span> <span class="n">overlap_ratio_res</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, the parameter <code class="docutils literal notranslate"><span class="pre">resampling_mode</span></code> defines the numpy or scipy method to resample the data. By default,
the <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.CubicSpline.html">CubicSpline</a> method
is selected, but other methods might come relevant for different use-cases.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;excerpt.wav&quot;</span><span class="p">,</span>
                   <span class="n">resampling_rate</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">resampling_mode</span><span class="o">=</span><span class="s2">&quot;cubic&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="compute-the-envelope-for-audio-files">
<h2>Compute the envelope for audio files<a class="headerlink" href="#compute-the-envelope-for-audio-files" title="Link to this heading"></a></h2>
<p>It is recommended to calculate the envelope of audio files (parameter <code class="docutils literal notranslate"><span class="pre">compute_envelope</span></code> - defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>). Two
more parameters, <code class="docutils literal notranslate"><span class="pre">window_size_env</span></code> and <code class="docutils literal notranslate"><span class="pre">overlap_ratio_env</span></code> allow to cut big audio arrays into windows, in a similar
fashion as for the resampling (see previous paragraph). The default value of these parameters are of 10 million samples
and an overlap of 50% - and, just like for the resampling, these values allow to significantly speed up the computation,
with a negligible trade-off in accuracy.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;excerpt.wav&quot;</span><span class="p">,</span>
                   <span class="n">compute_envelope</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">window_size_env</span><span class="o">=</span><span class="mf">1e7</span><span class="p">,</span> <span class="n">overlap_ratio_env</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, it is also recommended to apply a low-pass filter on the audio arrays - <code class="docutils literal notranslate"><span class="pre">filter_below</span></code> has a default value
of 50 Hz, which should work fine in most cases. It is possible to refine the filter by defining a lower cut
(<code class="docutils literal notranslate"><span class="pre">filter_above</span></code>, default to <code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
</section>
<section id="return-the-delay-in-seconds">
<h2>Return the delay in seconds<a class="headerlink" href="#return-the-delay-in-seconds" title="Link to this heading"></a></h2>
<p>By default, the find_delay function returns the delay in number of samples. It is possible to set the delay
return format using <code class="docutils literal notranslate"><span class="pre">return_delay_format</span></code>. For example, for files sampled at 48000 Hz and a delay
found at exactly 1 second, the different methods will return the following values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;excerpt.wav&quot;</span><span class="p">,</span> <span class="n">return_delay_format</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>  <span class="c1"># Returns 48000</span>
<span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;excerpt.wav&quot;</span><span class="p">,</span> <span class="n">return_delay_format</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>  <span class="c1"># Returns 1</span>
<span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;excerpt.wav&quot;</span><span class="p">,</span> <span class="n">return_delay_format</span><span class="o">=</span><span class="s2">&quot;ms&quot;</span><span class="p">)</span>  <span class="c1"># Returns 1000</span>
<span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;excerpt.wav&quot;</span><span class="p">,</span> <span class="n">return_delay_format</span><span class="o">=</span><span class="s2">&quot;timedelta&quot;</span><span class="p">)</span>  <span class="c1"># Returns datetime.timedelta(seconds=1)</span>
</pre></div>
</div>
</section>
<section id="plot-the-delay">
<h2>Plot the delay<a class="headerlink" href="#plot-the-delay" title="Link to this heading"></a></h2>
<p>find_delay offers a way to visualize the delay calculation. The relevant parameters are <code class="docutils literal notranslate"><span class="pre">plot_figure</span></code>,
<code class="docutils literal notranslate"><span class="pre">plot_intermediate_steps</span></code>, <code class="docutils literal notranslate"><span class="pre">x_format_figure</span></code>, <code class="docutils literal notranslate"><span class="pre">path_figure</span></code>, <code class="docutils literal notranslate"><span class="pre">name_array_1</span></code>, <code class="docutils literal notranslate"><span class="pre">name_array_2</span></code>, and
<code class="docutils literal notranslate"><span class="pre">dark_theme</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">plot_figure</span></code> will define if to show the figure or not.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plot_intermediate_steps</span></code> will define if to show the results of the resampling and the envelope
calculations (if they were calculated).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x_format_figure</span></code> will define the format of the values on the x-axis (if set on <code class="docutils literal notranslate"><span class="pre">&quot;auto&quot;</span></code>, the
format will be controlled by the value of the parameter <code class="docutils literal notranslate"><span class="pre">return_delay_format</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">path_figure</span></code>, if defined, will define the path where to save the figure.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name_array_1</span></code> and <code class="docutils literal notranslate"><span class="pre">name_array_2</span></code> will define the names of the two arrays on the figure.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dark_mode</span></code> defines if the figure should appear in dark theme or not.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">delay</span> <span class="o">=</span> <span class="n">find_delay</span><span class="p">(</span><span class="s2">&quot;audio_file.wav&quot;</span><span class="p">,</span> <span class="s2">&quot;excerpt.wav&quot;</span><span class="p">,</span>
                   <span class="n">plot_figure</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plot_intermediate_steps</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                   <span class="n">x_format_figure</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="n">path_figure</span><span class="o">=</span><span class="s2">&quot;figures/figure.png&quot;</span><span class="p">,</span>
                   <span class="n">name_array_1</span><span class="o">=</span><span class="s2">&quot;Original&quot;</span><span class="p">,</span> <span class="n">name_array_2</span><span class="o">=</span><span class="s2">&quot;Excerpt&quot;</span><span class="p">,</span> <span class="n">dark_mode</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting figure:</p>
<img alt="../_images/figure_example.png" src="../_images/figure_example.png" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../examples.html" class="btn btn-neutral float-left" title="Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="delay_meg_misc.html" class="btn btn-neutral float-right" title="Find the delay of the audio on the MISC channel of an MEG recording" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Romain Pastureau.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>